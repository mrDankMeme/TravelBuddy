# --- Snapshot configuration ----------------------------------------------------
# Проект без .xcworkspace — используем .xcodeproj
project "./TravelBuddy.xcodeproj"
# Если позже перейдёшь на workspace — замени строкой:
# workspace "./TravelBuddy.xcworkspace"

# Схема c основным приложением (UITests должны быть привязаны к этой схеме)
scheme "TravelBuddy"

# Девайсы и локали для скриншотов
devices   ["iPhone 16 Pro", "iPhone 16 Pro Max"]
languages ["en-US", "ru-RU"]

# Куда складывать скриншоты и DerivedData (чтобы не гонять системные кеши)
output_directory  "fastlane/screenshots"
derived_data_path "fastlane/DerivedData"

# Стабильность/скорость:
reinstall_app true         # каждый прогон «с нуля» (удаляем/ставим приложение)
erase_simulator false      # симулятор не стираем (экономим ~время)
concurrent_simulators false # последовательно → меньше флаков
number_of_retries 0        # без повторов (устраняет конфликт resultBundlePath)
override_status_bar true   # красивые статусбары для стор/презентаций
clear_previous_screenshots false
headless true              # не открывать Preview после прогона

# Не трогаем/не резолвим пакеты — их прогреет CI + кэш
skip_package_dependencies_resolution true
disable_package_automatic_updates    true

# Не просим xcodebuild формировать .xcresult (ускоряет и убирает «existing file…»)
result_bundle false

# Форматтер логов
xcodebuild_formatter "xcbeautify"

# Аргументы запуска для мок-режима (приложение должно их уважать)
launch_arguments [
  "-uiTesting",  "1",
  "-uiMockData", "1"
]

# Примечание:
#  - Онбординг НЕ скипаем, отдельного флага тут нет → тест кликает по онбордингу руками.
#  - Если захочешь — добавь собственный "-skipOnboarding YES" и обработай в коде.
# ------------------------------------------------------------------------------
